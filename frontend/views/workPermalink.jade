//- 
	Catalog web/view

	Copyright 2014 Commons Machinery http://commonsmachinery.se/

	Authors:
		Elsa Balderrama <elsa@commonsmachinery.se>

	Distributed under an AGPL_v3 license, please see LICENSE in the top dir.

- var work = data
mixin branch(data)
	dl
		for val, key in data
			dt #{key}:
			if typeof val == 'object'
				dd
					+branch(val)
			else
				if owner
					dd
						input.editable(name="#{key}" disabled value="#{val}")
				else
					dd(name="#{key}") #{val}

include includes/top
	div.bootstrapData #{JSON.stringify(data)}
	div#work
		h1(name="id") #{work.id}
		input.edit(type="button" value="Edit")
		a(href="#{work.metadata}") (view metadata...)
		br
		a(href="#{work.resource}/sources") (view sources...)
		-delete work.id
		-delete work.resource
		-delete work.metadata
		- work.created = new Date(parseInt(work.created)).toString()
		+branch(work)
include includes/bottom